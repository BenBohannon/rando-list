{%- assign games = "" | split: "" -%}
{%- for game in include.series.games -%}
    {%- assign games = games | push: game[0] -%}
{%- endfor -%}
{%- assign games = games | sort_natural -%}

<h3 id="{{ include.series.name | cgi_escape }}" class="my-0"><a href="#{{ include.series.name | cgi_escape }}"><i class="bi bi-link-45deg"></i></a>
    {% if games.size == 1 %}
        {%- assign no_game_titles = true -%}
        {%- assign firstGame = games[0] -%}
        {%- assign game_data = include.series.games[firstGame] -%}
        {%- assign release_year = game_data.release-date | split: "-" | first -%}

        {{ firstGame }}
        {% if release_year %}
            <span class="text-muted fs-5">({{ release_year }})</span>
        {% endif %}
        
        {%- comment -%} Series with a different name to the sole game within will have their title appended {%- endcomment -%}
        {% if firstGame != include.series.name %}
            <span class="text-muted">{{ include.series.name }}</span>
        {% endif %}
    {% else %}
        {{ include.series.name }}
    {% endif %}
</h3>

{%- if include.series.comment -%}
    <p>{{ include.series.comment | markdownify }}</p>
{%- endif -%}

<ul class="series-list">
{%- if include.games_merged -%}
    {%- assign randos = include.series.randomizers | sort_natural: "identifier" -%}

    {%- for rando in randos -%}
        {%- include rando.html rando=rando parent_name=include.series.name standalone=true -%}
    {%- endfor -%}

{%- else -%}
    {%- for game in games -%}
        {%- include game.html series=include.series game=game notitle=no_game_titles -%}
    {%- endfor -%}
{%- endif -%}
</ul>
